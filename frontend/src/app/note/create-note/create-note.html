<p-toast/>
<page pageHeader="نویسه جدید">
  <p-stepper [value]="1" [linear]="true">
    <p-step-item [value]="1">
      <p-step>بنویس</p-step>
      <p-step-panel>
        <ng-template #content let-activateCallback="activateCallback">
          <div [style]="{direction: editorDirection()}" class="min-h-[200px] sm:min-h-[300px]">
            <p-editor [(ngModel)]="noteContent"/>
          </div>

          <div class="py-4 sm:py-6 text-left">
            <p-button label="مرحله‌ی بعدی" severity="primary" size="small" (onClick)="activateNoteConfigurationStep(activateCallback)"/>
          </div>
        </ng-template>
      </p-step-panel>
    </p-step-item>
    <p-step-item [value]="2">
      <p-step>تنظیمش کن</p-step>
      <p-step-panel>
        <ng-template #content let-activateCallback="activateCallback">
          <div class="grid grid-flow-row grid-rows-2 sm:grid-rows-1 grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-2">
            <div>
              <p-floatlabel variant="on">
                <p-password [(ngModel)]="notePassword" inputId="notePassword" [toggleMask]="true" autocomplete="off" fluid promptLabel="رمز خود را وارد نمایید" weakLabel="ضعیف" mediumLabel="متوسط" strongLabel="قوی">
                  <ng-template #header>
                    <h1 class="text-base sm:text-lg font-semibold">
                      پیچیدگی رمز شما
                    </h1>
                  </ng-template>

                  <ng-template #footer>
                    <ul class="mt-3 text-xs sm:text-sm">
                      <li>
                        حتما از رمز قوی استفاده نمایید.
                      </li>
                      <li>
                        رمز قوی شامل حروف بزرگ و کوچک، اعداد و نمادها می‌باشد.
                      </li>
                      <li>
                        هرچه رمز شما قوی‌تر باشد، امنیت نویسه شما بیشتر خواهد بود.
                      </li>
                    </ul>
                  </ng-template>
                </p-password>
                <label for="notePassword" class="text-sm sm:text-base">رمز نویسه</label>
              </p-floatlabel>
            </div>
            <div>
              <p-floatlabel variant="on">
                <p-select [(ngModel)]="expTime" [options]="expTimes" inputId="expTime" optionLabel="time" fluid/>
                <label for="expTime" class="text-sm sm:text-base">زمان انقضا نویسه</label>
              </p-floatlabel>
            </div>
          </div>

          <div class="py-4 sm:py-6 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-0">
            <p-button label="مرحله قبلی" severity="secondary" size="small" (onClick)="activateCallback(1)" class="w-full sm:w-auto"/>
            <p-button label="مرحله‌ی بعدی" severity="primary" size="small" (onClick)="activateNoteReviewStep(activateCallback)" class="w-full sm:w-auto"/>
          </div>
        </ng-template>
      </p-step-panel>
    </p-step-item>
    <p-step-item [value]="3">
      <p-step>مرورش کن</p-step>
      <p-step-panel>
        <ng-template #content let-activateCallback="activateCallback">
          <div class="flex flex-col gap-3">
            <p-fieldset legend="متن نویسه‌ی شما" [toggleable]="true" class="w-full text-sm sm:text-base">
              <div [style]="{direction: editorDirection()}" class="max-w-full overflow-x-auto! text-sm sm:text-base" [innerHTML]="safeNoteContent()"></div>
            </p-fieldset>

            <div class="flex justify-start items-center gap-2">
              <p-badge value="نکته"/>
              <h2 class="text-xs sm:text-sm font-semibold">
                {{getExpTimeTitle()}}
              </h2>
            </div>
          </div>

          <div class="py-4 sm:py-6 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-0">
            <p-button label="مرحله قبلی" severity="secondary" size="small" (onClick)="activateCallback(2)" class="w-full sm:w-auto"/>
            <p-button label="ایجاد نویسه" severity="primary" size="small" (onClick)="createNote()" [disabled]="creatingNote()" class="w-full sm:w-auto"/>
          </div>
        </ng-template>
      </p-step-panel>
    </p-step-item>
  </p-stepper>
</page>
